## Master Theorem（主定理）直观理解

Master Theorem 其实就是在比较：

- **递归产生的代价** $n^{\log_b a}$
- **额外代价** $f(n)$

谁更“强”，最终结果就由谁主导。Case 2 是两者刚好相等时的平衡情况。

---

## 总结表格

| 情况   | 条件                                                     | 结果                                             |
| ------ | -------------------------------------------------------- | ------------------------------------------------ |
| Case 1 | $f(n) = O(n^{\log_b a - \epsilon})$                      | $T(n) = \Theta(n^{\log_b a})$                    |
| Case 2 | $f(n) = \Theta(n^{\log_b a} \cdot \log^k n)$             | $T(n) = \Theta(n^{\log_b a} \cdot \log^{k+1} n)$ |
| Case 3 | $f(n) = \Omega(n^{\log_b a + \epsilon})$，且满足正则条件 | $T(n) = \Theta(f(n))$                            |

---

## 1. Master theorem 和 Recursive tree 的关系

**（a）是否可以用 Master theorem 的递归都能用 recursive tree 分析？**
✅ **是的**。

- Master theorem 只是一个“公式化”的快捷工具。
- 它能解决的递归式都符合：

  $$
  T(n) = aT\!\left(\frac{n}{b}\right) + f(n)
  $$

  对应到 recursive tree，就是每一层有 $a$ 个子问题，每个子问题规模缩小 $1/b$，外加额外代价 $f(n)$。

- 递归树法（recursive tree）更通用，它能一步步画出来、再做求和。即使 Master theorem 不适用（例如 $T(n)=T(n-1)+n$，或者 $T(n)=2T(n/2)+\frac{n}{\log n}$），递归树依然能用。

**（b）反过来，递归树法能解决的递归都可以用 Master theorem 吗？**
❌ **不是的**。

- Master theorem 有严格的适用条件，主要是：

  - 递归必须是 **平衡的分治形式**，子问题大小要是 $n/b$ 这样均匀划分。
  - $f(n)$ 必须满足正则条件，不能太“奇怪”。

- 很多递归 Master theorem 用不了，但递归树依然可以算。比如：

  - $T(n) = T(n-1)+1$（线性递归，master theorem 不适用）。
  - $T(n) = 2T(n/2) + n/\log n$（临界情况，master theorem 不覆盖）。
  - $T(n) = T(n/2)+T(n/3)+n$（子问题规模不一样）。

👉 所以：

- Master theorem ⊆ Recursive tree。
- Recursive tree 更“万能”，Master theorem 更“快捷”。

---

## 2. 递归树求和中的等比数列是否可能发散？

在递归树里，每一层的代价通常形成一个数列，比如：

$$
\text{每层代价} = a^i \cdot f(n/b^i)
$$

当 $f(n)=\Theta(n^d)$ 时，这一层大概是：

$$
\text{第 i 层代价} \;\approx\; n^d \cdot \left(\frac{a}{b^d}\right)^i
$$

这就是一个等比数列，公比：

$$
q = \frac{a}{b^d}
$$

---

### 三种情况：

1. **$q < 1$**：数列收敛，前几层主导（Case 1）。
2. **$q = 1$**：每层贡献差不多，总和 = 每层 × 层数 → 带一个 $\log n$（Case 2）。
3. **$q > 1$**：数列发散，最底层主导（Case 3）。

---

### 举个例子

- $T(n)=4T(n/2)+n$

  - 这里 $a=4, b=2, d=1$。
  - 公比 $q = a/b^d = 4/2^1 = 2 > 1$。
  - 所以数列发散，最后一层（叶子层）主导。
  - 结果 $T(n)=\Theta(n^2)$。

---

✅ 结论：递归树里的“等比数列”确实可能发散（当 $q>1$ 时），这正对应 Master theorem 的 **Case 3**。
